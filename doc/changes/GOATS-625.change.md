Refactored test infrastructure: Separated tests and optimized execution.
